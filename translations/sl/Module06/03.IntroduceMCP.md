<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "8a7765b85f123e8a62aa3847141ca072",
  "translation_date": "2025-10-30T15:01:02+00:00",
  "source_file": "Module06/03.IntroduceMCP.md",
  "language_code": "sl"
}
-->
# Poglavje 03 - Integracija protokola Model Context Protocol (MCP)

## Uvod v MCP (Model Context Protocol)

Model Context Protocol (MCP) je odprtokodni standard za povezovanje AI aplikacij z zunanjimi sistemi. Z uporabo MCP lahko AI aplikacije, kot sta Claude ali ChatGPT, dostopajo do virov podatkov (npr. lokalne datoteke, baze podatkov), orodij (npr. iskalniki, kalkulatorji) in delovnih procesov (npr. specializirani pozivi), kar jim omogoča dostop do ključnih informacij in izvajanje nalog.

MCP si lahko predstavljate kot **USB-C priključek za AI aplikacije**. Tako kot USB-C zagotavlja standardiziran način povezovanja elektronskih naprav, MCP zagotavlja standardiziran način povezovanja AI aplikacij z zunanjimi sistemi.

### Kaj omogoča MCP?

MCP odpira zmogljive možnosti za AI aplikacije:

- **Personalizirani AI asistenti**: Agenti lahko dostopajo do vašega Google Koledarja in Notion-a ter delujejo kot bolj personalizirani AI asistenti
- **Napredno generiranje kode**: Claude Code lahko ustvari celotno spletno aplikacijo na podlagi Figma dizajna
- **Integracija podatkov v podjetju**: Chatboti v podjetjih se lahko povežejo z več bazami podatkov znotraj organizacije, kar uporabnikom omogoča analizo podatkov prek klepeta
- **Kreativni delovni procesi**: AI modeli lahko ustvarijo 3D dizajne v Blenderju in jih natisnejo s 3D tiskalnikom
- **Dostop do informacij v realnem času**: Povezava z zunanjimi viri podatkov za ažurne informacije
- **Kompleksne večstopenjske operacije**: Izvajanje sofisticiranih delovnih procesov z združevanjem več orodij in sistemov

### Zakaj je MCP pomemben?

MCP prinaša koristi celotnemu ekosistemu:

**Za razvijalce**: MCP zmanjšuje čas razvoja in kompleksnost pri gradnji ali integraciji AI aplikacij ali agentov.

**Za AI aplikacije**: MCP omogoča dostop do ekosistema virov podatkov, orodij in aplikacij, kar izboljša zmogljivosti in izkušnjo končnega uporabnika.

**Za končne uporabnike**: MCP omogoča bolj zmogljive AI aplikacije ali agente, ki lahko dostopajo do vaših podatkov in po potrebi ukrepajo v vašem imenu.

## Mali jezikovni modeli (SLM) v MCP

Mali jezikovni modeli predstavljajo učinkovit pristop k implementaciji AI, saj ponujajo več prednosti:

### Prednosti SLM-jev
- **Učinkovitost virov**: Nižje zahteve po računalniških virih
- **Hitrejši odzivni časi**: Zmanjšana zakasnitev za aplikacije v realnem času  
- **Stroškovna učinkovitost**: Minimalne infrastrukturne potrebe
- **Zasebnost**: Lahko delujejo lokalno brez prenosa podatkov
- **Prilagodljivost**: Lažje prilagajanje za specifične domene

### Zakaj SLM-ji dobro delujejo z MCP

SLM-ji v kombinaciji z MCP ustvarjajo močno povezavo, kjer so sposobnosti sklepanja modela okrepljene z zunanjimi orodji, kar kompenzira njihovo manjše število parametrov z izboljšano funkcionalnostjo.

## Pregled Python MCP SDK

Python MCP SDK zagotavlja osnovo za gradnjo aplikacij, ki podpirajo MCP. SDK vključuje:

- **Knjižnice za odjemalce**: Za povezovanje z MCP strežniki
- **Okvir za strežnike**: Za ustvarjanje prilagojenih MCP strežnikov
- **Upravljalnike protokola**: Za upravljanje komunikacije
- **Integracijo orodij**: Za izvajanje zunanjih funkcij

## Praktična implementacija: Phi-4 MCP odjemalec

Raziskali bomo implementacijo v resničnem svetu z uporabo mini modela Phi-4 podjetja Microsoft, integriranega z zmogljivostmi MCP.

### Pregled arhitekture MCP

MCP sledi **odjemalec-strežnik arhitekturi**, kjer MCP gostitelj (AI aplikacija, kot sta Claude Code ali Claude Desktop) vzpostavi povezave z enim ali več MCP strežniki. MCP gostitelj to doseže z ustvarjanjem enega MCP odjemalca za vsak MCP strežnik.

#### Ključni udeleženci

- **MCP gostitelj**: AI aplikacija, ki koordinira in upravlja enega ali več MCP odjemalcev
- **MCP odjemalec**: Komponenta, ki vzdržuje povezavo z MCP strežnikom in pridobiva kontekst od MCP strežnika za uporabo MCP gostitelja
- **MCP strežnik**: Program, ki zagotavlja kontekst MCP odjemalcem

#### Dvoslojna arhitektura

MCP je sestavljen iz dveh ločenih slojev:

**Podatkovni sloj**: Določa JSON-RPC osnovan protokol za komunikacijo med odjemalcem in strežnikom, vključno z:
- Upravljanje življenjskega cikla (inicializacija povezave, pogajanje zmogljivosti)
- Osnovni gradniki (orodja, viri, pozivi)
- Funkcije odjemalca (vzorčenje, pridobivanje, beleženje)
- Funkcije pripomočkov (obvestila, sledenje napredku)

**Transportni sloj**: Določa mehanizme in kanale komunikacije:
- **STDIO transport**: Uporablja standardne tokove vhod/izhod za lokalne procese (optimalna zmogljivost, brez omrežnih stroškov)
- **Streamable HTTP transport**: Uporablja HTTP POST z opcijskimi dogodki, ki jih strežnik pošlje za oddaljene strežnike (podpira standardno HTTP avtentikacijo)

```
┌─────────────────────────────────────┐
│           MCP Host                  │
│     (AI Application)                │
└─────────────────┬───────────────────┘
                  │
┌─────────────────┴───────────────────┐
│         MCP Client 1                │
│  ┌─────────────────────────────────┐ │
│  │        Data Layer               │ │
│  │  ├── Lifecycle Management       │ │
│  │  ├── Primitives (Tools/Resources)│ │
│  │  └── Notifications              │ │
│  └─────────────────────────────────┘ │
│  ┌─────────────────────────────────┐ │
│  │      Transport Layer           │ │
│  │  ├── STDIO Transport           │ │
│  │  └── HTTP Transport            │ │
│  └─────────────────────────────────┘ │
└─────────────────┬───────────────────┘
                  │
┌─────────────────┴───────────────────┐
│         MCP Server 1                │
│    (Local/Remote Context Provider)  │
└─────────────────────────────────────┘
```

### Osnovni gradniki MCP

MCP definira gradnike, ki določajo vrste kontekstualnih informacij, ki jih je mogoče deliti z AI aplikacijami, in obseg dejanj, ki jih je mogoče izvesti.

#### Gradniki strežnika

MCP definira tri osnovne gradnike, ki jih strežniki lahko izpostavijo:

**Orodja**: Izvedljive funkcije, ki jih AI aplikacije lahko pokličejo za izvedbo dejanj
- Primeri: operacije z datotekami, API klici, poizvedbe v bazi podatkov
- Metode: `tools/list`, `tools/call`
- Podpora dinamičnemu odkrivanju in izvajanju

**Viri**: Viri podatkov, ki zagotavljajo kontekstualne informacije AI aplikacijam
- Primeri: vsebina datotek, zapisi v bazi podatkov, odgovori API-ja
- Metode: `resources/list`, `resources/read`
- Omogočajo dostop do strukturiranih podatkov

**Pozivi**: Ponovno uporabne predloge, ki pomagajo strukturirati interakcije z jezikovnimi modeli
- Primeri: sistemski pozivi, primeri z malo podatki
- Metode: `prompts/list`, `prompts/get`
- Standardizirajo vzorce interakcij z AI

#### Gradniki odjemalca

MCP prav tako definira gradnike, ki jih odjemalci lahko izpostavijo za omogočanje bogatejših interakcij:

**Vzorečenje**: Omogoča strežnikom, da zahtevajo dokončanja jezikovnega modela od AI aplikacije odjemalca
- Metoda: `sampling/complete`
- Omogoča razvoj strežnikov, neodvisnih od modela
- Zagotavlja dostop do jezikovnega modela gostitelja

**Pridobivanje**: Omogoča strežnikom, da zahtevajo dodatne informacije od uporabnikov
- Metoda: `elicitation/request`
- Omogoča interakcijo z uporabnikom in potrditev
- Podpira dinamično zbiranje informacij

**Beleženje**: Omogoča strežnikom pošiljanje dnevniških sporočil odjemalcem
- Uporablja se za odpravljanje napak in spremljanje
- Zagotavlja preglednost operacij strežnika

### Življenjski cikel protokola MCP

#### Inicializacija in pogajanje zmogljivosti

MCP je protokol s stanjem, ki zahteva upravljanje življenjskega cikla. Proces inicializacije služi več ključnim namenom:

1. **Pogajanje različice protokola**: Zagotavlja, da odjemalec in strežnik uporabljata združljive različice protokola (npr. "2025-06-18")
2. **Odkrivanje zmogljivosti**: Vsaka stran deklarira podprte funkcije in gradnike
3. **Izmenjava identitete**: Zagotavlja identifikacijske in verzijske informacije

```python
# Example initialization request
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "initialize",
  "params": {
    "protocolVersion": "2025-06-18",
    "capabilities": {
      "elicitation": {},  # Client supports user interaction
      "sampling": {}      # Client can provide LLM completions
    },
    "clientInfo": {
      "name": "edge-ai-client",
      "version": "1.0.0"
    }
  }
}
```

#### Odkrivanje in izvajanje orodij

Po inicializaciji lahko odjemalci odkrijejo in izvajajo orodja:

```python
# Discover available tools
tools_response = await session.list_tools()

# Execute a tool
result = await session.call_tool(
    "weather_current",
    {
        "location": "San Francisco",
        "units": "imperial"
    }
)
```

#### Obvestila v realnem času

MCP podpira obvestila v realnem času za dinamične posodobitve:

```python
# Server sends notification when tools change
{
  "jsonrpc": "2.0",
  "method": "notifications/tools/list_changed"
}

# Client responds by refreshing tool list
await session.list_tools()  # Get updated tools
```

## Začetek: Vodnik po korakih

### Korak 1: Nastavitev okolja

Namestite potrebne odvisnosti:
```bash
pip install fastmcp mcp-python-client openai requests pyautogui Pillow
```

### Korak 2: Osnovna konfiguracija

Nastavite okoljske spremenljivke:
```python
# System Configuration
SYSTEM_PROMPT = "You are an AI assistant with some tools."

# Ollama Configuration (Local)
OLLAMA_URL = "http://localhost:11434/api/chat"
OLLAMA_MODEL_ID = "phi4-mini:3.8b-fp16"

# vLLM Configuration (Server)
VLLM_URL = "http://localhost:8000/v1"
VLLM_MODEL_ID = "microsoft/Phi-4-mini-instruct"
```

### Korak 3: Zagon vašega prvega MCP odjemalca

**Osnovna nastavitev Ollama:**
```bash
python ghmodel_mcp_demo.py
```

**Uporaba vLLM zaledja:**
```bash
python ghmodel_mcp_demo.py --env vllm
```

**Povezava prek dogodkov, ki jih strežnik pošlje:**
```bash
python ghmodel_mcp_demo.py --run sse
```

**Prilagojen MCP strežnik:**
```bash
python ghmodel_mcp_demo.py --server /path/to/server.py
```

### Korak 4: Programska uporaba

```python
import asyncio
from ghmodel_mcp_demo import OllamaClient, Phi4MiniMCPClient

async def automated_interaction():
    # Configure MCP server parameters
    server_params = StdioServerParameters(
        command="npx",
        args=["@playwright/mcp@latest"],
        env=None,
    )
    
    # Create MCP client and process tools
    async with Phi4MiniMCPClient(server_params) as mcp_client:
        tools = await process_mcp_tools(mcp_client)
        llm_client = OllamaClient()
        
        # Generate response with tool capabilities
        response, messages = await llm_client.generate_response(
            "Help me automate a web task",
            tools
        )
        return response

# Execute the automation
result = asyncio.run(automated_interaction())
print(result)
```

## Napredne funkcije

### Podpora za več zaledij

Implementacija podpira tako Ollama kot vLLM zaledja, kar vam omogoča izbiro glede na vaše zahteve:

- **Ollama**: Boljše za lokalni razvoj in testiranje
- **vLLM**: Optimizirano za produkcijo in scenarije z visokim pretokom

### Prilagodljivi povezovalni protokoli

Podprta sta dva načina povezave:

**STDIO način**: Neposredna komunikacija procesov
- Nižja zakasnitev
- Primerno za lokalna orodja
- Enostavna nastavitev

**SSE način**: Pretakanje na osnovi HTTP
- Omrežno sposobno
- Boljše za porazdeljene sisteme
- Posodobitve v realnem času

### Zmožnosti integracije orodij

Sistem se lahko integrira z različnimi orodji:
- Spletna avtomatizacija (Playwright)
- Operacije z datotekami
- Interakcije z API-ji
- Sistemski ukazi
- Prilagojene funkcije

## Upravljanje napak in najboljše prakse

### Celovito upravljanje napak

Implementacija vključuje robustno upravljanje napak za:

**Napake povezave:**
- Okvare MCP strežnika
- Časovne omejitve omrežja
- Težave s povezljivostjo

**Napake pri izvajanju orodij:**
- Manjkajoča orodja
- Validacija parametrov
- Napake pri izvajanju

**Napake pri obdelavi odgovorov:**
- Težave pri razčlenjevanju JSON-a
- Nedoslednosti v formatu
- Anomalije v odgovorih LLM

### Najboljše prakse

1. **Upravljanje virov**: Uporabljajte asinhrone upravljalnike konteksta
2. **Upravljanje napak**: Implementirajte celovite try-catch bloke
3. **Beleženje**: Omogočite ustrezne ravni beleženja
4. **Varnost**: Validirajte vhodne podatke in sanirajte izhodne
5. **Zmogljivost**: Uporabljajte združevanje povezav in predpomnjenje

## Resnične aplikacije

### Spletna avtomatizacija
```python
# Example: Automated web testing
async def web_automation_example():
    tools = await setup_playwright_tools()
    response = await llm_client.generate_response(
        "Navigate to example.com and take a screenshot",
        tools
    )
```

### Obdelava podatkov
```python
# Example: File analysis
async def data_processing_example():
    tools = await setup_file_tools()
    response = await llm_client.generate_response(
        "Analyze the CSV file and generate a summary report",
        tools
    )
```

### Integracija API-jev
```python
# Example: API interactions
async def api_integration_example():
    tools = await setup_api_tools()
    response = await llm_client.generate_response(
        "Fetch weather data and create a forecast summary",
        tools
    )
```

## Optimizacija zmogljivosti

### Upravljanje pomnilnika
- Učinkovito upravljanje zgodovine sporočil
- Pravilno čiščenje virov
- Združevanje povezav

### Omrežna optimizacija
- Asinhrone HTTP operacije
- Nastavljive časovne omejitve
- Graciozno okrevanje po napakah

### Sočasna obdelava
- Neblokirajoči vhod/izhod
- Vzporedno izvajanje orodij
- Učinkoviti asinhroni vzorci

## Varnostni vidiki

### Zaščita podatkov
- Varno upravljanje API ključev
- Validacija vhodnih podatkov
- Sanacija izhodnih podatkov

### Omrežna varnost
- Podpora za HTTPS
- Privzete lokalne končne točke
- Varno upravljanje žetonov

### Varnost izvajanja
- Filtriranje orodij
- Peskovana okolja
- Beleženje revizij

## MCP ekosistem in razvoj

### Obseg projekta MCP

Ekosistem Model Context Protocol vključuje več ključnih komponent:

- **[Specifikacija MCP](https://modelcontextprotocol.io/specification/latest)**: Uradna specifikacija, ki opisuje zahteve za implementacijo odjemalcev in strežnikov
- **[MCP SDK-ji](https://modelcontextprotocol.io/docs/sdk)**: SDK-ji za različne programske jezike, ki implementirajo MCP
- **Razvojna orodja MCP**: Orodja za razvoj MCP strežnikov in odjemalcev, vključno z [MCP Inspector](https://github.com/modelcontextprotocol/inspector)
- **[Referenčne implementacije MCP strežnikov](https://github.com/modelcontextprotocol/servers)**: Referenčne implementacije MCP strežnikov

### Začetek razvoja MCP

Začnite graditi z MCP:

**Gradnja strežnikov**: [Ustvarite MCP strežnike](https://modelcontextprotocol.io/docs/develop/build-server), da izpostavite svoje podatke in orodja

**Gradnja odjemalcev**: [Razvijte aplikacije](https://modelcontextprotocol.io/docs/develop/build-client), ki se povezujejo z MCP strežniki

**Učenje konceptov**: [Razumite osnovne koncepte](https://modelcontextprotocol.io/docs/learn/architecture) in arhitekturo MCP

## Zaključek

SLM-ji, integrirani z MCP, predstavljajo premik paradigme v razvoju AI aplikacij. Z združevanjem učinkovitosti majhnih modelov z močjo zunanjih orodij lahko razvijalci ustvarijo inteligentne sisteme, ki so hkrati učinkoviti z viri in zelo zmogljivi.

Model Context Protocol zagotavlja standardiziran način povezovanja AI aplikacij z zunanjimi sistemi, podobno kot USB-C zagotavlja univerzalni standard povezovanja za elektronske naprave. Ta standardizacija omogoča:

- **Brezhibno integracijo**: Povezovanje AI modelov z raznolikimi viri podatkov in orodji
- **Rast ekosistema**: Gradnja enkrat, uporaba v več AI aplikacijah
- **Izboljšane zmogljivosti**: Nadgradnja SLM-jev z zunanjo funkcionalnostjo
- **Posodobitve v realnem času**: Podpora dinamičnim, odzivnim AI aplikacijam

Ključne točke:
- MCP je odprt standard, ki povezuje AI aplikacije in zunanje sisteme
- Protokol podpira orodja, vire in pozive kot osnovne gradnike
- Obvestila v realnem času omogočajo dinamične, odzivne aplikacije
- Pravilno upravljanje življenjskega cikla in napak je bistveno za uporabo v produkciji
- Ekosistem zagotavlja celovite SDK-je in razvojna orodja

## Reference in dodatno branje

### Uradna dokumentacija MCP

- **[Uradna stran Model Context Protocol](https://modelcontextprotocol.io/)** - Celotna dokumentacija in specifikacije
- **[Vodnik za začetek z MCP](https://modelcontextprotocol.io/docs/getting-started/intro)** - Uvod in osnovni koncepti
- **[Pregled arhitekture MCP](https://modelcontextprotocol.io/docs/learn/architecture)** - Podrobna tehnična arhitektura
- **[Specifikacija MCP](https://modelcontextprotocol.io/specification/latest)** - Uradna specifikacija protokola
- **[Dokumentacija MCP SDK-jev](https://modelcontextprotocol.io/docs/sdk)** - Vodniki za SDK-je specifičnih jezikov

### Razvojni viri

- **[MCP za začetnike](https://aka.ms/mcp-for-beginners)** - Celovit vodnik za začetnike o Model Context Protocol
- **[GitHub organizacija MCP](https://github.com/modelcontextprotocol)** - Uradni repozitoriji in primeri
- **[Repozitorij MCP strežnikov](https://github.com/modelcontext
- **[Ollama Dokumentacija](https://ollama.ai/docs)** - Platforma za lokalno uvajanje LLM
- **[vLLM Dokumentacija](https://docs.vllm.ai/)** - Strežba LLM z visoko zmogljivostjo

### Tehnični standardi in protokoli

- **[JSON-RPC 2.0 Specifikacija](https://www.jsonrpc.org/)** - Osnovni RPC protokol, ki ga uporablja MCP
- **[JSON Schema](https://json-schema.org/)** - Standard za definicijo shem za orodja MCP
- **[OpenAPI Specifikacija](https://swagger.io/specification/)** - Standard za dokumentacijo API-jev
- **[Server-Sent Events (SSE)](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events)** - Spletni standard za posodobitve v realnem času

### Razvoj AI agentov

- **[Microsoft Agent Framework](https://github.com/microsoft/agent-framework)** - Razvoj agentov, pripravljen za produkcijo
- **[LangChain Dokumentacija](https://docs.langchain.com/)** - Okvir za integracijo agentov in orodij
- **[Semantic Kernel](https://learn.microsoft.com/en-us/semantic-kernel/)** - Microsoftov SDK za orkestracijo AI

### Industrijska poročila in raziskave

- **[Anthropicova objava o Model Context Protocol](https://www.anthropic.com/news/model-context-protocol)** - Prvotna predstavitev MCP
- **[Pregled majhnih jezikovnih modelov](https://arxiv.org/abs/2410.20011)** - Akademski pregled raziskav SLM
- **[Analiza trga Edge AI](https://www.marketsandmarkets.com/Market-Reports/edge-ai-software-market-74385617.html)** - Industrijski trendi in napovedi
- **[Najboljše prakse za razvoj AI agentov](https://arxiv.org/abs/2309.02427)** - Raziskave o arhitekturah agentov

Ta razdelek ponuja temelje za gradnjo lastnih MCP aplikacij, ki temeljijo na SLM, in odpira možnosti za avtomatizacijo, obdelavo podatkov ter integracijo inteligentnih sistemov.

## ➡️ Kaj sledi

- [Modul 7. Primeri Edge AI](../Module07/README.md)

---

**Omejitev odgovornosti**:  
Ta dokument je bil preveden z uporabo storitve za prevajanje AI [Co-op Translator](https://github.com/Azure/co-op-translator). Čeprav si prizadevamo za natančnost, vas prosimo, da upoštevate, da lahko avtomatizirani prevodi vsebujejo napake ali netočnosti. Izvirni dokument v njegovem maternem jeziku je treba obravnavati kot avtoritativni vir. Za ključne informacije priporočamo profesionalni človeški prevod. Ne prevzemamo odgovornosti za morebitne nesporazume ali napačne razlage, ki izhajajo iz uporabe tega prevoda.