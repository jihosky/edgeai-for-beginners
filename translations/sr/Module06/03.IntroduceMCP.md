<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "8a7765b85f123e8a62aa3847141ca072",
  "translation_date": "2025-10-30T14:46:04+00:00",
  "source_file": "Module06/03.IntroduceMCP.md",
  "language_code": "sr"
}
-->
# Секција 03 - Интеграција Протокола Контекста Модела (MCP)

## Увод у MCP (Протокол Контекста Модела)

Протокол Контекста Модела (MCP) је отворени стандард за повезивање AI апликација са спољашњим системима. Уз MCP, AI апликације као што су Claude или ChatGPT могу се повезати са изворима података (нпр. локалним фајловима, базама података), алатима (нпр. претраживачима, калкулаторима) и радним токовима (нпр. специјализованим упутствима)—омогућавајући им приступ кључним информацијама и извршавање задатака.

Замислите MCP као **USB-C порт за AI апликације**. Као што USB-C пружа стандардизован начин за повезивање електронских уређаја, MCP пружа стандардизован начин за повезивање AI апликација са спољашњим системима.

### Шта MCP омогућава?

MCP откључава моћне могућности за AI апликације:

- **Персонализовани AI асистенти**: Агенти могу приступити вашем Google календару и Notion-у, делујући као персонализовани AI асистент
- **Напредна генерација кода**: Claude Code може генерисати целу веб апликацију користећи Figma дизајн
- **Интеграција података у предузећу**: Четботови за предузећа могу се повезати са више база података унутар организације, омогућавајући корисницима анализу података путем чета
- **Креативни радни токови**: AI модели могу креирати 3D дизајне у Blender-у и штампати их помоћу 3D штампача
- **Приступ информацијама у реалном времену**: Повезивање са спољашњим изворима података за ажурне информације
- **Комплексне операције у више корака**: Извршавање сложених радних токова који комбинују више алата и система

### Зашто је MCP важан?

MCP пружа предности широм екосистема:

**За програмере**: MCP смањује време развоја и сложеност приликом изградње или интеграције AI апликације или агента.

**За AI апликације**: MCP пружа приступ екосистему извора података, алата и апликација који побољшавају могућности и унапређују корисничко искуство.

**За крајње кориснике**: MCP резултира способнијим AI апликацијама или агентима који могу приступити вашим подацима и предузети радње у ваше име када је то потребно.

## Мали језички модели (SLMs) у MCP-у

Мали језички модели представљају ефикасан приступ примени AI-а, нудећи неколико предности:

### Предности SLM-ова
- **Ефикасност ресурса**: Мањи захтеви за рачунарским ресурсима
- **Брже време одзива**: Смањена кашњења за апликације у реалном времену  
- **Исплативост**: Минималне потребе за инфраструктуром
- **Приватност**: Могу радити локално без преноса података
- **Прилагођавање**: Лакше прилагођавање за специфичне домене

### Зашто SLM-ови добро функционишу са MCP-ом

SLM-ови у комбинацији са MCP-ом стварају моћну комбинацију где се способности резоновања модела допуњују спољашњим алатима, надокнађујући њихов мањи број параметара кроз побољшану функционалност.

## Преглед Python MCP SDK-а

Python MCP SDK пружа основу за изградњу апликација које подржавају MCP. SDK укључује:

- **Клијентске библиотеке**: За повезивање са MCP серверима
- **Оквир за сервере**: За креирање прилагођених MCP сервера
- **Руководиоце протокола**: За управљање комуникацијом
- **Интеграцију алата**: За извршавање спољашњих функција

## Практична имплементација: Phi-4 MCP клијент

Хајде да истражимо реалну имплементацију користећи Microsoft-ов Phi-4 мини модел интегрисан са MCP могућностима.

### Преглед MCP архитектуре

MCP прати **клијент-сервер архитектуру** где MCP домаћин (AI апликација као Claude Code или Claude Desktop) успоставља везе са једним или више MCP сервера. MCP домаћин то постиже креирањем једног MCP клијента за сваки MCP сервер.

#### Кључни учесници

- **MCP домаћин**: AI апликација која координира и управља једним или више MCP клијената
- **MCP клијент**: Компонента која одржава везу са MCP сервером и добија контекст од MCP сервера за употребу MCP домаћина
- **MCP сервер**: Програм који пружа контекст MCP клијентима

#### Двослојна архитектура

MCP се састоји од два различита слоја:

**Слој података**: Дефинише JSON-RPC базирани протокол за комуникацију клијента и сервера, укључујући:
- Управљање животним циклусом (иницијализација везе, преговарање способности)
- Основне примитиве (алати, ресурси, упутства)
- Клијентске функције (узорковање, прикупљање информација, логовање)
- Помоћне функције (обавештења, праћење напретка)

**Слој транспорта**: Дефинише механизме и канале комуникације:
- **STDIO транспорт**: Користи стандардне улазно/излазне токове за локалне процесе (оптималне перформансе, без мрежног оптерећења)
- **Streamable HTTP транспорт**: Користи HTTP POST са опционим Server-Sent Events за удаљене сервере (подржава стандардну HTTP аутентификацију)

```
┌─────────────────────────────────────┐
│           MCP Host                  │
│     (AI Application)                │
└─────────────────┬───────────────────┘
                  │
┌─────────────────┴───────────────────┐
│         MCP Client 1                │
│  ┌─────────────────────────────────┐ │
│  │        Data Layer               │ │
│  │  ├── Lifecycle Management       │ │
│  │  ├── Primitives (Tools/Resources)│ │
│  │  └── Notifications              │ │
│  └─────────────────────────────────┘ │
│  ┌─────────────────────────────────┐ │
│  │      Transport Layer           │ │
│  │  ├── STDIO Transport           │ │
│  │  └── HTTP Transport            │ │
│  └─────────────────────────────────┘ │
└─────────────────┬───────────────────┘
                  │
┌─────────────────┴───────────────────┐
│         MCP Server 1                │
│    (Local/Remote Context Provider)  │
└─────────────────────────────────────┘
```

### MCP основне примитиве

MCP дефинише примитиве који одређују врсте контекстуалних информација које се могу делити са AI апликацијама и опсег радњи које се могу извршити.

#### Примитиве сервера

MCP дефинише три основне примитиве које сервери могу изложити:

**Алати**: Извршиве функције које AI апликације могу позвати ради извршавања радњи
- Примери: операције са фајловима, API позиви, упити базе података
- Методе: `tools/list`, `tools/call`
- Подржавају динамичко откривање и извршавање

**Ресурси**: Извори података који пружају контекстуалне информације AI апликацијама
- Примери: садржај фајлова, записи базе података, одговори API-а
- Методе: `resources/list`, `resources/read`
- Омогућавају приступ структурираним подацима

**Упутства**: Поново употребљиви шаблони који помажу у структурирању интеракција са језичким моделима
- Примери: системска упутства, примери са мало података
- Методе: `prompts/list`, `prompts/get`
- Стандардују обрасце интеракције AI-а

#### Примитиве клијента

MCP такође дефинише примитиве које клијенти могу изложити ради омогућавања богатијих интеракција:

**Узорковање**: Омогућава серверима да затраже комплетирање језичког модела од AI апликације клијента
- Метод: `sampling/complete`
- Омогућава развој сервера независно од модела
- Пружа приступ језичком моделу домаћина

**Прикупљање информација**: Омогућава серверима да затраже додатне информације од корисника
- Метод: `elicitation/request`
- Омогућава интеракцију са корисником и потврду
- Подржава динамично прикупљање информација

**Логовање**: Омогућава серверима да шаљу поруке логовања клијентима
- Користи се за дебаговање и праћење
- Пружа видљивост у операције сервера

### Животни циклус MCP протокола

#### Иницијализација и преговарање способности

MCP је протокол са стањем који захтева управљање животним циклусом. Процес иницијализације служи неколико критичних сврха:

1. **Преговарање верзије протокола**: Осигурава да клијент и сервер користе компатибилне верзије протокола (нпр. "2025-06-18")
2. **Откривање способности**: Свака страна декларише подржане функције и примитиве
3. **Размена идентитета**: Пружа информације о идентификацији и верзији

```python
# Example initialization request
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "initialize",
  "params": {
    "protocolVersion": "2025-06-18",
    "capabilities": {
      "elicitation": {},  # Client supports user interaction
      "sampling": {}      # Client can provide LLM completions
    },
    "clientInfo": {
      "name": "edge-ai-client",
      "version": "1.0.0"
    }
  }
}
```

#### Откривање и извршавање алата

Након иницијализације, клијенти могу открити и извршавати алате:

```python
# Discover available tools
tools_response = await session.list_tools()

# Execute a tool
result = await session.call_tool(
    "weather_current",
    {
        "location": "San Francisco",
        "units": "imperial"
    }
)
```

#### Обавештења у реалном времену

MCP подржава обавештења у реалном времену за динамичка ажурирања:

```python
# Server sends notification when tools change
{
  "jsonrpc": "2.0",
  "method": "notifications/tools/list_changed"
}

# Client responds by refreshing tool list
await session.list_tools()  # Get updated tools
```

## Почетак рада: Водич корак по корак

### Корак 1: Подешавање окружења

Инсталирајте потребне зависности:
```bash
pip install fastmcp mcp-python-client openai requests pyautogui Pillow
```

### Корак 2: Основна конфигурација

Подесите променљиве окружења:
```python
# System Configuration
SYSTEM_PROMPT = "You are an AI assistant with some tools."

# Ollama Configuration (Local)
OLLAMA_URL = "http://localhost:11434/api/chat"
OLLAMA_MODEL_ID = "phi4-mini:3.8b-fp16"

# vLLM Configuration (Server)
VLLM_URL = "http://localhost:8000/v1"
VLLM_MODEL_ID = "microsoft/Phi-4-mini-instruct"
```

### Корак 3: Покретање вашег првог MCP клијента

**Основно Ollama подешавање:**
```bash
python ghmodel_mcp_demo.py
```

**Коришћење vLLM позадине:**
```bash
python ghmodel_mcp_demo.py --env vllm
```

**Веза са Server-Sent Events:**
```bash
python ghmodel_mcp_demo.py --run sse
```

**Прилагођени MCP сервер:**
```bash
python ghmodel_mcp_demo.py --server /path/to/server.py
```

### Корак 4: Програмска употреба

```python
import asyncio
from ghmodel_mcp_demo import OllamaClient, Phi4MiniMCPClient

async def automated_interaction():
    # Configure MCP server parameters
    server_params = StdioServerParameters(
        command="npx",
        args=["@playwright/mcp@latest"],
        env=None,
    )
    
    # Create MCP client and process tools
    async with Phi4MiniMCPClient(server_params) as mcp_client:
        tools = await process_mcp_tools(mcp_client)
        llm_client = OllamaClient()
        
        # Generate response with tool capabilities
        response, messages = await llm_client.generate_response(
            "Help me automate a web task",
            tools
        )
        return response

# Execute the automation
result = asyncio.run(automated_interaction())
print(result)
```

## Напредне функције

### Подршка за више позадина

Имплементација подржава и Ollama и vLLM позадине, омогућавајући вам да изаберете на основу ваших потреба:

- **Ollama**: Боље за локални развој и тестирање
- **vLLM**: Оптимизовано за продукцију и сценарије са великим протоком

### Флексибилни протоколи везе

Подржана су два режима везе:

**STDIO режим**: Директна комуникација процеса
- Мања кашњења
- Погодно за локалне алате
- Једноставно подешавање

**SSE режим**: Стриминг заснован на HTTP-у
- Мрежно способан
- Боље за дистрибуиране системе
- Ажурирања у реалном времену

### Могућности интеграције алата

Систем може интегрисати различите алате:
- Веб аутоматизација (Playwright)
- Операције са фајловима
- API интеракције
- Системске команде
- Прилагођене функције

## Управљање грешкама и најбоље праксе

### Свеобухватно управљање грешкама

Имплементација укључује робусно управљање грешкама за:

**Грешке везе:**
- Неуспеси MCP сервера
- Мрежни тајмаути
- Проблеми са повезивањем

**Грешке извршавања алата:**
- Недостајући алати
- Валидација параметара
- Неуспеси извршавања

**Грешке обраде одговора:**
- Проблеми са JSON парсирањем
- Неконзистентности формата
- Аномалије у одговорима LLM-а

### Најбоље праксе

1. **Управљање ресурсима**: Користите асинхроне контекст менаџере
2. **Управљање грешкама**: Имплементирајте свеобухватне try-catch блокове
3. **Логовање**: Омогућите одговарајуће нивое логовања
4. **Безбедност**: Валидација уноса и чишћење излаза
5. **Перформансе**: Користите пулање веза и кеширање

## Реалне апликације

### Веб аутоматизација
```python
# Example: Automated web testing
async def web_automation_example():
    tools = await setup_playwright_tools()
    response = await llm_client.generate_response(
        "Navigate to example.com and take a screenshot",
        tools
    )
```

### Обрада података
```python
# Example: File analysis
async def data_processing_example():
    tools = await setup_file_tools()
    response = await llm_client.generate_response(
        "Analyze the CSV file and generate a summary report",
        tools
    )
```

### Интеграција API-а
```python
# Example: API interactions
async def api_integration_example():
    tools = await setup_api_tools()
    response = await llm_client.generate_response(
        "Fetch weather data and create a forecast summary",
        tools
    )
```

## Оптимизација перформанси

### Управљање меморијом
- Ефикасно руковање историјом порука
- Правилно чишћење ресурса
- Пулање веза

### Мрежна оптимизација
- Асинхрони HTTP операције
- Конфигурабилни тајмаути
- Грациозно опорављање од грешака

### Конкурентна обрада
- Неблокирајући I/O
- Паралелно извршавање алата
- Ефикасни асинхрони обрасци

## Безбедносни аспекти

### Заштита података
- Сигурно управљање API кључевима
- Валидација уноса
- Чишћење излаза

### Мрежна безбедност
- Подршка за HTTPS
- Подразумевани локални крајњи точки
- Сигурно руковање токенима

### Безбедност извршавања
- Филтрирање алата
- Окружења са песковником
- Логовање ревизија

## MCP екосистем и развој

### Обим MCP пројекта

Екосистем Протокола Контекста Модела укључује неколико кључних компоненти:

- **[MCP Спецификација](https://modelcontextprotocol.io/specification/latest)**: Званична спецификација која описује захтеве за имплементацију клијената и сервера
- **[MCP SDK-ови](https://modelcontextprotocol.io/docs/sdk)**: SDK-ови за различите програмске језике који имплементирају MCP
- **MCP алати за развој**: Алати за развој MCP сервера и клијената, укључујући [MCP Inspector](https://github.com/modelcontextprotocol/inspector)
- **[Референтне имплементације MCP сервера](https://github.com/modelcontextprotocol/servers)**: Референтне имплементације MCP сервера

### Почетак MCP развоја

Да бисте започели изградњу са MCP-ом:

**Изградите сервере**: [Креирајте MCP сервере](https://modelcontextprotocol.io/docs/develop/build-server) за излагање ваших података и алата

**Изградите клијенте**: [Развијте апликације](https://modelcontextprotocol.io/docs/develop/build-client) које се повезују са MCP серверима

**Научите концепте**: [Разумите основне концепте](https://modelcontextprotocol.io/docs/learn/architecture) и архитектуру MCP-а

## Закључак

SLM-ови интегрисани са MCP-ом представљају промену парадигме у развоју AI апликација. Комбинујући ефикасност малих модела са снагом спољашњих алата, програмери могу креирати интелигентне системе који су истовремено ресурсно ефикасни и веома способни.

Протокол Контекста Модела пружа стандардизован начин за повезивање AI апликација са спољашњим системима, као што USB-C пружа универзални стандард за повезивање електронских уређаја. Ова стандардизација омогућава:

- **Беспрекорну интеграцију**: Повежите AI моделе са различитим изворима података и алатима
- **Раст екосистема
- **[Ollama Dokumentacija](https://ollama.ai/docs)** - Platforma za lokalno postavljanje LLM-a
- **[vLLM Dokumentacija](https://docs.vllm.ai/)** - Servis visokih performansi za LLM

### Tehnički standardi i protokoli

- **[JSON-RPC 2.0 Specifikacija](https://www.jsonrpc.org/)** - Osnovni RPC protokol koji koristi MCP
- **[JSON Schema](https://json-schema.org/)** - Standard za definisanje šema za MCP alate
- **[OpenAPI Specifikacija](https://swagger.io/specification/)** - Standard za dokumentaciju API-ja
- **[Server-Sent Events (SSE)](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events)** - Web standard za ažuriranja u realnom vremenu

### Razvoj AI agenata

- **[Microsoft Agent Framework](https://github.com/microsoft/agent-framework)** - Razvoj agenata spremnih za produkciju
- **[LangChain Dokumentacija](https://docs.langchain.com/)** - Okvir za integraciju agenata i alata
- **[Semantic Kernel](https://learn.microsoft.com/en-us/semantic-kernel/)** - Microsoftov SDK za orkestraciju AI-a

### Industrijski izveštaji i istraživanja

- **[Anthropicova najava Model Context Protocol-a](https://www.anthropic.com/news/model-context-protocol)** - Originalno predstavljanje MCP-a
- **[Pregled malih jezičkih modela](https://arxiv.org/abs/2410.20011)** - Akademski pregled istraživanja SLM-a
- **[Analiza tržišta Edge AI-a](https://www.marketsandmarkets.com/Market-Reports/edge-ai-software-market-74385617.html)** - Trendovi i prognoze u industriji
- **[Najbolje prakse za razvoj AI agenata](https://arxiv.org/abs/2309.02427)** - Istraživanje arhitektura agenata

Ovaj odeljak pruža osnovu za izgradnju sopstvenih MCP aplikacija zasnovanih na SLM-u, otvarajući mogućnosti za automatizaciju, obradu podataka i integraciju inteligentnih sistema.

## ➡️ Šta dalje

- [Modul 7. Primeri Edge AI-a](../Module07/README.md)

---

**Одрицање од одговорности**:  
Овај документ је преведен помоћу услуге за превођење вештачке интелигенције [Co-op Translator](https://github.com/Azure/co-op-translator). Иако настојимо да обезбедимо тачност, молимо вас да имате у виду да аутоматски преводи могу садржати грешке или нетачности. Оригинални документ на његовом изворном језику треба сматрати ауторитативним извором. За критичне информације препоручује се професионални превод од стране људи. Не преузимамо одговорност за било каква погрешна тумачења или неспоразуме који могу настати услед коришћења овог превода.