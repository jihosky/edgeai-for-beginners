<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "8a7765b85f123e8a62aa3847141ca072",
  "translation_date": "2025-10-30T13:59:22+00:00",
  "source_file": "Module06/03.IntroduceMCP.md",
  "language_code": "sw"
}
-->
# Sehemu ya 03 - Muunganisho wa Itifaki ya Muktadha wa Modeli (MCP)

## Utangulizi wa MCP (Itifaki ya Muktadha wa Modeli)

Itifaki ya Muktadha wa Modeli (MCP) ni kiwango cha wazi cha kuunganisha programu za AI na mifumo ya nje. Kwa kutumia MCP, programu za AI kama Claude au ChatGPT zinaweza kuunganishwa na vyanzo vya data (mfano, faili za ndani, hifadhidata), zana (mfano, injini za utafutaji, kalkuleta), na michakato (mfano, maelekezo maalum)—kuwezesha kupata taarifa muhimu na kutekeleza majukumu.

Fikiria MCP kama **bandari ya USB-C kwa programu za AI**. Kama USB-C inavyotoa njia ya kawaida ya kuunganisha vifaa vya elektroniki, MCP inatoa njia ya kawaida ya kuunganisha programu za AI na mifumo ya nje.

### MCP Inaweza Kufanikisha Nini?

MCP inafungua uwezo mkubwa kwa programu za AI:

- **Wasaidizi wa AI Waliobinafsishwa**: Mawakala wanaweza kufikia Google Calendar yako na Notion, wakifanya kazi kama msaidizi wa AI aliyebinafsishwa zaidi.
- **Uundaji wa Nambari ya Juu**: Claude Code inaweza kuunda programu nzima ya wavuti kwa kutumia muundo wa Figma.
- **Muunganisho wa Data ya Biashara**: Chatbots za biashara zinaweza kuunganishwa na hifadhidata nyingi ndani ya shirika, kuwawezesha watumiaji kuchambua data kwa kutumia mazungumzo.
- **Michakato ya Ubunifu**: Modeli za AI zinaweza kuunda miundo ya 3D kwenye Blender na kuichapisha kwa kutumia printer ya 3D.
- **Ufikiaji wa Taarifa za Wakati Halisi**: Kuunganishwa na vyanzo vya data vya nje kwa taarifa za kisasa.
- **Operesheni za Hatua Nyingi**: Kutekeleza michakato tata inayochanganya zana na mifumo mbalimbali.

### Kwa Nini MCP Ni Muhimu?

MCP inatoa faida katika ekosistimu nzima:

**Kwa Watengenezaji**: MCP inapunguza muda wa maendeleo na ugumu wa kujenga au kuunganisha na programu au wakala wa AI.

**Kwa Programu za AI**: MCP inatoa ufikiaji wa ekosistimu ya vyanzo vya data, zana, na programu zinazoboresha uwezo na kuboresha uzoefu wa mtumiaji wa mwisho.

**Kwa Watumiaji wa Mwisho**: MCP inasababisha programu za AI zenye uwezo zaidi au mawakala wanaoweza kufikia data yako na kuchukua hatua kwa niaba yako inapohitajika.

## Modeli Ndogo za Lugha (SLMs) katika MCP

Modeli Ndogo za Lugha zinawakilisha njia bora ya kupeleka AI, zikiwa na faida kadhaa:

### Faida za SLMs
- **Ufanisi wa Rasilimali**: Mahitaji ya chini ya kompyuta
- **Nyakati za Majibu Haraka**: Kupunguza ucheleweshaji kwa programu za wakati halisi  
- **Gharama Nafuu**: Mahitaji madogo ya miundombinu
- **Faragha**: Inaweza kuendeshwa ndani bila usafirishaji wa data
- **Ubinafsishaji**: Rahisi kurekebisha kwa nyanja maalum

### Kwa Nini SLMs Zinafanya Kazi Vizuri na MCP

SLMs zikichanganywa na MCP huunda mchanganyiko wenye nguvu ambapo uwezo wa kufikiri wa modeli huimarishwa na zana za nje, kufidia idadi ndogo ya vigezo kupitia utendaji ulioboreshwa.

## Muhtasari wa Python MCP SDK

Python MCP SDK inatoa msingi wa kujenga programu zinazotumia MCP. SDK inajumuisha:

- **Maktaba za Wateja**: Kwa kuunganisha na seva za MCP
- **Mfumo wa Seva**: Kwa kuunda seva za MCP maalum
- **Wakili wa Itifaki**: Kwa kusimamia mawasiliano
- **Muunganisho wa Zana**: Kwa kutekeleza kazi za nje

## Utekelezaji wa Kivitendo: Mteja wa Phi-4 MCP

Hebu tuchunguze utekelezaji wa ulimwengu halisi kwa kutumia modeli ndogo ya Phi-4 ya Microsoft iliyounganishwa na uwezo wa MCP.

### Muhtasari wa Usanifu wa MCP

MCP inafuata **usanifu wa mteja-seva** ambapo mwenyeji wa MCP (programu ya AI kama Claude Code au Claude Desktop) huanzisha muunganisho na seva moja au zaidi za MCP. Mwenyeji wa MCP hufanikisha hili kwa kuunda mteja mmoja wa MCP kwa kila seva ya MCP.

#### Washiriki Muhimu

- **Mwenyeji wa MCP**: Programu ya AI inayoratibu na kusimamia wateja mmoja au zaidi wa MCP
- **Mteja wa MCP**: Sehemu inayodumisha muunganisho na seva ya MCP na kupata muktadha kutoka kwa seva ya MCP kwa mwenyeji wa MCP kutumia
- **Seva ya MCP**: Programu inayotoa muktadha kwa wateja wa MCP

#### Usanifu wa Tabaka Mbili

MCP ina tabaka mbili tofauti:

**Tabaka la Data**: Linafafanua itifaki inayotegemea JSON-RPC kwa mawasiliano ya mteja-seva, ikijumuisha:
- Usimamizi wa mzunguko wa maisha (kuanzisha muunganisho, mazungumzo ya uwezo)
- Vipengele vya msingi (zana, rasilimali, maelekezo)
- Vipengele vya mteja (uchambuzi, uchochezi, ufuatiliaji)
- Vipengele vya matumizi (arifa, ufuatiliaji wa maendeleo)

**Tabaka la Usafirishaji**: Linafafanua mifumo na njia za mawasiliano:
- **Usafirishaji wa STDIO**: Hutumia njia za pembejeo/pato za kawaida kwa michakato ya ndani (utendaji bora, hakuna mzigo wa mtandao)
- **Usafirishaji wa HTTP Unaoweza Kutiririka**: Hutumia HTTP POST na Matukio Yanayotumwa na Seva kwa seva za mbali (inaunga mkono uthibitishaji wa kawaida wa HTTP)

```
┌─────────────────────────────────────┐
│           MCP Host                  │
│     (AI Application)                │
└─────────────────┬───────────────────┘
                  │
┌─────────────────┴───────────────────┐
│         MCP Client 1                │
│  ┌─────────────────────────────────┐ │
│  │        Data Layer               │ │
│  │  ├── Lifecycle Management       │ │
│  │  ├── Primitives (Tools/Resources)│ │
│  │  └── Notifications              │ │
│  └─────────────────────────────────┘ │
│  ┌─────────────────────────────────┐ │
│  │      Transport Layer           │ │
│  │  ├── STDIO Transport           │ │
│  │  └── HTTP Transport            │ │
│  └─────────────────────────────────┘ │
└─────────────────┬───────────────────┘
                  │
┌─────────────────┴───────────────────┐
│         MCP Server 1                │
│    (Local/Remote Context Provider)  │
└─────────────────────────────────────┘
```

### Vipengele vya Msingi vya MCP

MCP inafafanua vipengele vinavyobainisha aina za taarifa za muktadha zinazoweza kushirikiwa na programu za AI na anuwai ya hatua zinazoweza kutekelezwa.

#### Vipengele vya Seva

MCP inafafanua vipengele vitatu vya msingi ambavyo seva zinaweza kufichua:

**Zana**: Kazi zinazoweza kutekelezwa ambazo programu za AI zinaweza kuziita kutekeleza hatua
- Mifano: operesheni za faili, miito ya API, maswali ya hifadhidata
- Mbinu: `tools/list`, `tools/call`
- Inasaidia ugunduzi wa nguvu na utekelezaji

**Rasilimali**: Vyanzo vya data vinavyotoa taarifa za muktadha kwa programu za AI
- Mifano: maudhui ya faili, rekodi za hifadhidata, majibu ya API
- Mbinu: `resources/list`, `resources/read`
- Inawezesha ufikiaji wa data iliyopangwa

**Maelekezo**: Violezo vinavyoweza kutumika tena vinavyosaidia kuunda mwingiliano na modeli za lugha
- Mifano: maelekezo ya mfumo, mifano ya hatua chache
- Mbinu: `prompts/list`, `prompts/get`
- Inasawazisha mifumo ya mwingiliano wa AI

#### Vipengele vya Mteja

MCP pia inafafanua vipengele ambavyo wateja wanaweza kufichua ili kuwezesha mwingiliano wa kina zaidi:

**Uchambuzi**: Inaruhusu seva kuomba ukamilishaji wa modeli ya lugha kutoka kwa programu ya AI ya mteja
- Mbinu: `sampling/complete`
- Inawezesha maendeleo ya seva huru ya modeli
- Inatoa ufikiaji wa modeli ya lugha ya mwenyeji

**Uchochezi**: Inaruhusu seva kuomba taarifa za ziada kutoka kwa watumiaji
- Mbinu: `elicitation/request`
- Inawezesha mwingiliano wa mtumiaji na uthibitisho
- Inasaidia ukusanyaji wa taarifa wa nguvu

**Ufuatiliaji**: Inawezesha seva kutuma ujumbe wa ufuatiliaji kwa wateja
- Inatumika kwa madhumuni ya urekebishaji na ufuatiliaji
- Inatoa mwonekano wa operesheni za seva

### Mzunguko wa Itifaki ya MCP

#### Kuanzisha na Mazungumzo ya Uwezo

MCP ni itifaki yenye hali inayohitaji usimamizi wa mzunguko wa maisha. Mchakato wa kuanzisha unahudumia madhumuni kadhaa muhimu:

1. **Mazungumzo ya Toleo la Itifaki**: Inahakikisha mteja na seva wanatumia matoleo ya itifaki yanayolingana (mfano, "2025-06-18")
2. **Ugunduzi wa Uwezo**: Kila upande unatangaza vipengele na vipengele vinavyoungwa mkono
3. **Kubadilishana Utambulisho**: Inatoa taarifa za utambulisho na toleo

```python
# Example initialization request
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "initialize",
  "params": {
    "protocolVersion": "2025-06-18",
    "capabilities": {
      "elicitation": {},  # Client supports user interaction
      "sampling": {}      # Client can provide LLM completions
    },
    "clientInfo": {
      "name": "edge-ai-client",
      "version": "1.0.0"
    }
  }
}
```

#### Ugunduzi wa Zana na Utekelezaji

Baada ya kuanzisha, wateja wanaweza kugundua na kutekeleza zana:

```python
# Discover available tools
tools_response = await session.list_tools()

# Execute a tool
result = await session.call_tool(
    "weather_current",
    {
        "location": "San Francisco",
        "units": "imperial"
    }
)
```

#### Arifa za Wakati Halisi

MCP inaunga mkono arifa za wakati halisi kwa masasisho ya nguvu:

```python
# Server sends notification when tools change
{
  "jsonrpc": "2.0",
  "method": "notifications/tools/list_changed"
}

# Client responds by refreshing tool list
await session.list_tools()  # Get updated tools
```

## Kuanza: Mwongozo wa Hatua kwa Hatua

### Hatua ya 1: Usanidi wa Mazingira

Sakinisha utegemezi unaohitajika:
```bash
pip install fastmcp mcp-python-client openai requests pyautogui Pillow
```

### Hatua ya 2: Usanidi wa Msingi

Sanidi vigezo vya mazingira yako:
```python
# System Configuration
SYSTEM_PROMPT = "You are an AI assistant with some tools."

# Ollama Configuration (Local)
OLLAMA_URL = "http://localhost:11434/api/chat"
OLLAMA_MODEL_ID = "phi4-mini:3.8b-fp16"

# vLLM Configuration (Server)
VLLM_URL = "http://localhost:8000/v1"
VLLM_MODEL_ID = "microsoft/Phi-4-mini-instruct"
```

### Hatua ya 3: Kuendesha Mteja wako wa Kwanza wa MCP

**Usanidi wa Msingi wa Ollama:**
```bash
python ghmodel_mcp_demo.py
```

**Kutumia vLLM Backend:**
```bash
python ghmodel_mcp_demo.py --env vllm
```

**Muunganisho wa Matukio Yanayotumwa na Seva:**
```bash
python ghmodel_mcp_demo.py --run sse
```

**Seva ya MCP Maalum:**
```bash
python ghmodel_mcp_demo.py --server /path/to/server.py
```

### Hatua ya 4: Matumizi ya Kiprogramu

```python
import asyncio
from ghmodel_mcp_demo import OllamaClient, Phi4MiniMCPClient

async def automated_interaction():
    # Configure MCP server parameters
    server_params = StdioServerParameters(
        command="npx",
        args=["@playwright/mcp@latest"],
        env=None,
    )
    
    # Create MCP client and process tools
    async with Phi4MiniMCPClient(server_params) as mcp_client:
        tools = await process_mcp_tools(mcp_client)
        llm_client = OllamaClient()
        
        # Generate response with tool capabilities
        response, messages = await llm_client.generate_response(
            "Help me automate a web task",
            tools
        )
        return response

# Execute the automation
result = asyncio.run(automated_interaction())
print(result)
```

## Vipengele vya Juu

### Msaada wa Backend Nyingi

Utekelezaji unasaidia backend za Ollama na vLLM, ikiruhusu kuchagua kulingana na mahitaji yako:

- **Ollama**: Bora kwa maendeleo ya ndani na majaribio
- **vLLM**: Imeboreshwa kwa uzalishaji na hali za mtiririko wa juu

### Itifaki za Muunganisho Zinazobadilika

Njia mbili za muunganisho zinasaidiwa:

**Hali ya STDIO**: Mawasiliano ya mchakato wa moja kwa moja
- Ucheleweshaji wa chini
- Inafaa kwa zana za ndani
- Usanidi rahisi

**Hali ya SSE**: Utiririshaji unaotegemea HTTP
- Inaweza kutumika mtandaoni
- Bora kwa mifumo iliyosambazwa
- Masasisho ya wakati halisi

### Uwezo wa Muunganisho wa Zana

Mfumo unaweza kuunganishwa na zana mbalimbali:
- Uendeshaji wa wavuti (Playwright)
- Operesheni za faili
- Mwingiliano wa API
- Amri za mfumo
- Kazi maalum

## Usimamizi wa Makosa na Mazoea Bora

### Usimamizi wa Makosa wa Kina

Utekelezaji unajumuisha usimamizi wa makosa thabiti kwa:

**Makosa ya Muunganisho:**
- Kushindwa kwa seva ya MCP
- Muda wa mtandao
- Masuala ya muunganisho

**Makosa ya Utekelezaji wa Zana:**
- Zana zinazokosekana
- Uthibitishaji wa vigezo
- Kushindwa kwa utekelezaji

**Makosa ya Usindikaji wa Majibu:**
- Masuala ya uchambuzi wa JSON
- Kutolingana kwa muundo
- Upungufu wa majibu ya LLM

### Mazoea Bora

1. **Usimamizi wa Rasilimali**: Tumia wasimamizi wa muktadha wa async
2. **Usimamizi wa Makosa**: Tekeleza vizuizi vya jaribu-kamata vya kina
3. **Ufuatiliaji**: Washa viwango sahihi vya ufuatiliaji
4. **Usalama**: Thibitisha pembejeo na safisha matokeo
5. **Utendaji**: Tumia upunguzaji wa muunganisho na uhifadhi

## Matumizi ya Ulimwengu Halisi

### Uendeshaji wa Wavuti
```python
# Example: Automated web testing
async def web_automation_example():
    tools = await setup_playwright_tools()
    response = await llm_client.generate_response(
        "Navigate to example.com and take a screenshot",
        tools
    )
```

### Usindikaji wa Data
```python
# Example: File analysis
async def data_processing_example():
    tools = await setup_file_tools()
    response = await llm_client.generate_response(
        "Analyze the CSV file and generate a summary report",
        tools
    )
```

### Muunganisho wa API
```python
# Example: API interactions
async def api_integration_example():
    tools = await setup_api_tools()
    response = await llm_client.generate_response(
        "Fetch weather data and create a forecast summary",
        tools
    )
```

## Uboreshaji wa Utendaji

### Usimamizi wa Kumbukumbu
- Ushughulikiaji mzuri wa historia ya ujumbe
- Usafishaji sahihi wa rasilimali
- Upunguzaji wa muunganisho

### Uboreshaji wa Mtandao
- Operesheni za HTTP za async
- Muda wa kusanidi unaoweza kubadilishwa
- Urejeshaji wa makosa kwa neema

### Usindikaji wa Wakati Ule Ule
- I/O isiyozuia
- Utekelezaji wa zana sambamba
- Mifumo bora ya async

## Masuala ya Usalama

### Ulinzi wa Data
- Usimamizi salama wa funguo za API
- Uthibitishaji wa pembejeo
- Usafishaji wa matokeo

### Usalama wa Mtandao
- Msaada wa HTTPS
- Chaguo-msingi za ncha za ndani
- Ushughulikiaji salama wa tokeni

### Usalama wa Utekelezaji
- Uchujaji wa zana
- Mazingira yaliyotengwa
- Ufuatiliaji wa ukaguzi

## Ekosistimu ya MCP na Maendeleo

### Wigo wa Mradi wa MCP

Ekosistimu ya Itifaki ya Muktadha wa Modeli inajumuisha vipengele kadhaa muhimu:

- **[Maelezo ya MCP](https://modelcontextprotocol.io/specification/latest)**: Maelezo rasmi yanayobainisha mahitaji ya utekelezaji kwa wateja na seva
- **[SDK za MCP](https://modelcontextprotocol.io/docs/sdk)**: SDK za lugha tofauti zinazotekeleza MCP
- **Zana za Maendeleo ya MCP**: Zana za kuendeleza seva na wateja wa MCP, ikijumuisha [MCP Inspector](https://github.com/modelcontextprotocol/inspector)
- **[Utekelezaji wa Seva za Marejeo za MCP](https://github.com/modelcontextprotocol/servers)**: Utekelezaji wa marejeo wa seva za MCP

### Kuanza na Maendeleo ya MCP

Ili kuanza kujenga na MCP:

**Jenga Seva**: [Unda seva za MCP](https://modelcontextprotocol.io/docs/develop/build-server) kufichua data na zana zako

**Jenga Wateja**: [Tengeneza programu](https://modelcontextprotocol.io/docs/develop/build-client) zinazounganishwa na seva za MCP

**Jifunze Dhana**: [Elewa dhana za msingi](https://modelcontextprotocol.io/docs/learn/architecture) na usanifu wa MCP

## Hitimisho

SLMs zilizounganishwa na MCP zinawakilisha mabadiliko makubwa katika maendeleo ya programu za AI. Kwa kuchanganya ufanisi wa modeli ndogo na nguvu ya zana za nje, watengenezaji wanaweza kuunda mifumo ya akili ambayo ni ya gharama nafuu na yenye uwezo mkubwa.

Itifaki ya Muktadha wa Modeli inatoa njia ya kawaida ya kuunganisha programu za AI na mifumo ya nje, kama USB-C inavyotoa kiwango cha kawaida cha muunganisho kwa vifaa vya elektroniki. Kiwango hiki kinawawezesha:

- **Muunganisho Usio na Shida**: Kuunganisha modeli za AI na vyanzo vya data na zana mbalimbali
- **Ukuaji wa Ekosistimu**: Jenga mara moja, tumia katika programu nyingi za AI
- **Uwezo Ulioboreshwa**: Kuimarisha SLMs kwa utendaji wa nje
- **Masasisho ya Wakati Halisi**: Kusaidia programu za AI zinazobadilika na kujibu haraka

Mambo muhimu ya kuzingatia:
- MCP ni kiwango cha wazi kinachounganisha programu za AI na mifumo ya nje
- Itifaki inasaidia zana, rasilimali, na maelekezo kama vipengele vya msingi
- Arifa za wakati halisi zinawezesha programu za nguvu na zinazojibu
- Usimamizi sahihi wa mzunguko wa maisha na usimamizi wa makosa ni muhimu kwa matumizi ya uzalishaji
- Ekosistimu inatoa SDK za kina na zana za maendeleo

## Marejeleo na Usomaji Zaidi

### Nyaraka Rasmi za MCP

- **[Tovuti Rasmi ya Itifaki ya Muktadha wa Modeli](https://modelcontextprotocol.io/)** - Nyaraka kamili na maelezo
- **[Mwongozo wa Kuanza wa MCP](https://modelcontextprotocol.io/docs/getting-started/intro)** - Utangulizi na dhana za msingi
- **[Muhtasari wa Usanifu wa MCP](
- **[Ollama Documentation](https://ollama.ai/docs)** - Jukwaa la kuendesha LLM kwa ndani
- **[vLLM Documentation](https://docs.vllm.ai/)** - Huduma ya LLM yenye utendaji wa juu

### Viwango vya Kiufundi na Itifaki

- **[JSON-RPC 2.0 Specification](https://www.jsonrpc.org/)** - Itifaki ya RPC inayotumiwa na MCP
- **[JSON Schema](https://json-schema.org/)** - Kiwango cha ufafanuzi wa schema kwa zana za MCP
- **[OpenAPI Specification](https://swagger.io/specification/)** - Kiwango cha nyaraka za API
- **[Server-Sent Events (SSE)](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events)** - Kiwango cha wavuti kwa masasisho ya wakati halisi

### Maendeleo ya Wakala wa AI

- **[Microsoft Agent Framework](https://github.com/microsoft/agent-framework)** - Maendeleo ya wakala tayari kwa uzalishaji
- **[LangChain Documentation](https://docs.langchain.com/)** - Mfumo wa kuunganisha wakala na zana
- **[Semantic Kernel](https://learn.microsoft.com/en-us/semantic-kernel/)** - SDK ya Microsoft kwa uratibu wa AI

### Ripoti za Sekta na Utafiti

- **[Anthropic's Model Context Protocol Announcement](https://www.anthropic.com/news/model-context-protocol)** - Utangulizi wa awali wa MCP
- **[Small Language Models Survey](https://arxiv.org/abs/2410.20011)** - Utafiti wa kitaaluma kuhusu SLM
- **[Edge AI Market Analysis](https://www.marketsandmarkets.com/Market-Reports/edge-ai-software-market-74385617.html)** - Mwelekeo wa sekta na utabiri
- **[AI Agent Development Best Practices](https://arxiv.org/abs/2309.02427)** - Utafiti kuhusu miundo ya wakala

Sehemu hii inatoa msingi wa kujenga programu zako za MCP zinazotumia SLM, ikifungua uwezekano wa kiotomatiki, usindikaji wa data, na ujumuishaji wa mifumo ya akili.

## ➡️ Nini kinafuata

- [Module 7. Edge AI samples](../Module07/README.md)

---

**Kanusho**:  
Hati hii imetafsiriwa kwa kutumia huduma ya kutafsiri ya AI [Co-op Translator](https://github.com/Azure/co-op-translator). Ingawa tunajitahidi kwa usahihi, tafadhali fahamu kuwa tafsiri za kiotomatiki zinaweza kuwa na makosa au kutokuwa sahihi. Hati ya asili katika lugha yake ya awali inapaswa kuzingatiwa kama chanzo cha mamlaka. Kwa taarifa muhimu, tafsiri ya kitaalamu ya binadamu inapendekezwa. Hatutawajibika kwa kutoelewana au tafsiri zisizo sahihi zinazotokana na matumizi ya tafsiri hii.